# スケジュールユーティリティ テスト仕様書

## 概要
- 対象: `src/widgets/tweetWidget/scheduleUtils.ts`
- 目的: `computeNextTime`関数が、ルールに基づいて次のスケジュール時刻を正しく計算することを検証する

---

## テストケース一覧

| No. | テスト内容                               | 目的                                       |
|-----|------------------------------------------|--------------------------------------------|
| 1   | 次の月曜日の正しい計算                   | 週をまたいだ次の予定時刻が正しく計算されるか |
| 2   | 未来時刻の場合、同日を返す               | 予定時刻が未来の場合に同日の時刻を返すか     |
| 3   | 開始日と終了日のハンドリング             | `startDate`と`endDate`の制約を尊重するか     |
| 4   | `endDate`を過ぎた場合に`null`を返す     | 予定時刻が`endDate`を超える場合に`null`を返すか |
| 5   | 複数の曜日から最も早い日を選択           | 複数の曜日指定から直近のものを選択するか     |

---

## 各テストケース詳細

### 1. 次の月曜日の正しい計算
- **テスト対象**: `computeNextTime`
- **目的**: 現在時刻が今週の予定時刻を過ぎている場合に、次の週の正しいタイムスタンプを計算できるか検証する
- **前提条件**:
  - 現在時刻: 月曜日 10:00
  - スケジュール: 毎週月曜日 9:00
- **入力値・操作**: `computeNextTime`を上記のスケジュールと現在時刻で呼び出す
- **期待結果**: 次の週の月曜日 9:00 のタイムスタンプが返される

### 2. 未来時刻の場合、同日を返す
- **テスト対象**: `computeNextTime`
- **目的**: 予定時刻がまだ過ぎていない場合に、同日のタイムスタンプを返すか検証する
- **前提条件**:
  - 現在時刻: 月曜日 7:00
  - スケジュール: 毎週月曜日 9:00
- **入力値・操作**: `computeNextTime`を上記のスケジュールと現在時刻で呼び出す
- **期待結果**: 同週の月曜日 9:00 のタイムスタンプが返される

### 3. 開始日と終了日のハンドリング
- **テスト対象**: `computeNextTime`
- **目的**: `startDate`と`endDate`の制約を正しく尊重するか検証する
- **前提条件**:
  - 現在時刻: 2024年5月6日（月） 10:00
  - スケジュール: 毎週金曜日 9:00, `startDate`: '2024-05-10', `endDate`: '2024-05-11'
- **入力値・操作**: `computeNextTime`を上記スケジュールで呼び出す
- **期待結果**: 2024年5月10日（金） 9:00 のタイムスタンプが返される

### 4. `endDate`を過ぎた場合に`null`を返す
- **テスト対象**: `computeNextTime`
- **目的**: 次に計算される予定時刻が`endDate`を過ぎている場合に`null`を返すか検証する
- **前提条件**:
  - 現在時刻: 2024年5月6日（月） 10:00
  - スケジュール: 毎週月曜日 9:00, `endDate`: '2024-05-07'
- **入力値・操作**: `computeNextTime`を上記スケジュールで呼び出す
- **期待結果**: `null`が返される（次の月曜日は5月13日であり、終了日を過ぎているため）

### 5. 複数の曜日から最も早い日を選択
- **テスト対象**: `computeNextTime`
- **目的**: 複数の曜日が指定された場合に、最も近い未来の日付を正しく選択するか検証する
- **前提条件**:
  - 現在時刻: 月曜日 10:00
  - スケジュール: 毎週火曜日と木曜日 9:00
- **入力値・操作**: `computeNextTime`を上記スケジュールで呼び出す
- **期待結果**: 直近の火曜日 9:00 のタイムスタンプが返される 